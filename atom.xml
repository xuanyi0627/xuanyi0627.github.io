<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>http://blog.exgame.club</id>
    <title>Matrix</title>
    <updated>2019-09-18T08:23:24.177Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="http://blog.exgame.club"/>
    <link rel="self" href="http://blog.exgame.club/atom.xml"/>
    <subtitle>业精于勤</subtitle>
    <logo>http://blog.exgame.club/images/avatar.png</logo>
    <icon>http://blog.exgame.club/favicon.ico</icon>
    <rights>All rights reserved 2019, Matrix</rights>
    <entry>
        <title type="html"><![CDATA[Supervisor为Go守护进程]]></title>
        <id>http://blog.exgame.club/post/supervisorgo</id>
        <link href="http://blog.exgame.club/post/supervisorgo">
        </link>
        <updated>2019-09-18T08:12:32.000Z</updated>
        <content type="html"><![CDATA[<h3 id="系统">系统</h3>
<p>CentOS7.x</p>
<h3 id="步骤">步骤</h3>
<ol>
<li>切换用户为root</li>
</ol>
<pre><code class="language-shell"># sudo su - #切换为root用户
</code></pre>
<ol start="2">
<li>安装</li>
</ol>
<pre><code># yum install epel-release
# yum install -y supervisor
# systemctl enable supervisord # 开机自启动
# systemctl start supervisord # 启动supervisord服务

# systemctl status supervisord # 查看supervisord服务状态
# ps -ef|grep supervisord # 查看是否存在supervisord进程
</code></pre>
<ol start="3">
<li>创建supervisor所需目录</li>
</ol>
<pre><code># mkdir /etc/supervisord.d/
</code></pre>
<ol start="4">
<li>创建supervisor配置文件</li>
</ol>
<pre><code># echo_supervisord_conf &gt; /etc/supervisord.conf
</code></pre>
<ol start="5">
<li>编辑supervisord.conf文件</li>
</ol>
<pre><code>[include]
files = /etc/supervisord.d/*.ini
</code></pre>
<ol start="6">
<li>启动supervisor</li>
</ol>
<pre><code># supervisord -c /etc/supervisord.conf
</code></pre>
<ol start="7">
<li>重启ERROR</li>
</ol>
<blockquote>
<p>Error: Another program is already listening on a port that one of our HTTP servers is configured to use. Shut this program down first before starting</p>
</blockquote>
<pre><code>find / -name supervisor.sock
unlink /tmp/supervisor.sock
</code></pre>
<ol start="8">
<li>*.ini 文件模板</li>
</ol>
<pre><code>[program:server_version]
command=/usr/local/gopath/bin/version_pro
autostart=true
autorestart=true
startsecs=10
stdout_logfile=/var/log/supervisord/version.log
stdout_logfile_maxbytes=1MB
stdout_logfile_backups=10
stdout_capture_maxbytes=1MB
stderr_logfile=/var/log/supervisord/version.log
stderr_logfile_maxbytes=1MB
stderr_logfile_backups=10
stderr_capture_maxbytes=1MB
</code></pre>
]]></content>
    </entry>
</feed>